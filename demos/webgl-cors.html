<!doctype html>
<html class="checker">
<head>
  <meta charset="utf-8">
  <title>AlphaJpg (WebGL &amp; CORS image)</title>
  <meta name="viewport" content="user-scalable=no, width=device-width, initial-scale=1, maximum-scale=1">
  <link rel="stylesheet" href="./css/prettify.css">
  <link rel="stylesheet" href="./css/sunburst.css">
  <link rel="stylesheet" href="./css/screen.css">
  <link href="https://fonts.googleapis.com/css?family=PT+Sans+Narrow" rel="stylesheet">
</head>
<body>

  <header class="header">
    <div class="header__inner">
      <a class="header__back-bttn bttn" href="index.html">Back</a>
      <a id="about-open" href="javascript:void(0);" class="header__label">WebGL (Cross Origin Image)<span class="header__icon" title="More Info"></span></a>
      <a id="source-open" class="header__source-bttn bttn" href="javascript:void(0);">View Source</a>
    </div>
  </header>
  <div id="source-code" class="app">

    <div id="myImage" class="preserveAspectRatio"><div></div></div>

    <script src="../js/AlphaJpg-WebGL.js"></script>
    <script>
      var myImage = document.getElementById('myImage');
      window.onload = function(){ // source-ignore delay execution so we can capture source before DOM is updated
      AlphaJpg_WebGL.load('https://dev-porcupine021.s3.amazonaws.com/alphajpg/img/test0.alpha.jpg', function(canvas){
        if(canvas === false){
          myImage.innerHTML = 'Sorry! This browser is not supported.';
        }
        else{
          myImage.childNodes[0].appendChild(canvas);
        }
      });
      } // source-ignore
    </script>

  </div>

  <div id="source-overlay" class="modal-overlay">
    <a id="source-close" class="close-bttn" href="javascript:void(0);" title="Close"></a>
    <div id="source-body" class="modal-body">
      <pre id="source-pre" class="prettyprint"></pre>
    </div>
  </div>

  <div id="about-overlay" class="modal-overlay" style="display:block;">
    <a id="about-close" class="close-bttn" href="javascript:void(0);" title="Close"></a>
    <div id="about-body" class="modal-body">
      <div class="about-inner">
        <h2>Description</h2>
        This demo shows the usage of the
        <a href="../js/AlphaJpg-WebGL.js" target="_blank" rel="noopener">AlphaJpg-WebGL.js</a>
        library.  A specially crafted 
        <a href="img/test0.alpha.jpg" target="_blank" rel="noopener">jpg image</a>
        is loaded from an external domain. It's alpha transparency is reconstructed 
        using WebGL. The returned canvas element is attached to the DOM. 
        The canvas is wrapped in two div elements and styled so that it behaves like 
        a responsive image.<br>
        <h2>Support</h2>
        This technique requires Javascript,
        <a href="https://caniuse.com/#feat=webgl" target="_blank" rel="noopener">WebGL support</a>.
        and an external server that is capable of delivering
        <a href="https://developer.mozilla.org/en-US/docs/Web/HTML/CORS_enabled_image" target="_blank" rel="noopener">CORS enabled images</a>.
      </div>
    </div>
  </div>

  <script src="./js/prettify.js"></script>
  <script src="./js/demo.js"></script>

</body>
</html>

